# CS-2D-Data

二维下料问题 (2D Cutting Stock Problem) 算例生成器。

## 问题描述

二维下料问题是将固定尺寸的母板切割为多种规格子板的优化问题，目标是最小化母板使用量。

```
母板 (Stock)                切割后
+------------------+        +------------------+
|                  |        | A  | B  |   C    |
|   W x H          |  -->   |----+----+--------|
|                  |        | D  |    E        |
+------------------+        +------------------+
```

## 功能特点

- **单参数难度控制**: 使用 0.0-1.0 的难度系数自动派生所有生成参数
- **三种生成策略**: 根据难度自动选择最合适的生成方法
- **2DPackLib 格式**: 输出标准 CSV 格式，兼容主流求解器
- **时间戳文件名**: 按文件名排序即为生成时间顺序

## 难度参数设计

难度系数 `d` (0.0-1.0) 控制以下参数:

| 参数 | 难度 0.0 | 难度 1.0 | 说明 |
|------|----------|----------|------|
| 子板类型数 | 5 | 40 | 类型越多，组合空间越大 |
| 尺寸相似度 | 0.0 | 0.9 | 相似尺寸增加对称性 |
| 最大需求量 | 30 | 3 | 小需求导致更多分数解 |
| 尺寸下限 | 8% | 15% | 相对于母板尺寸 |
| 尺寸上限 | 35% | 50% | 相对于母板尺寸 |
| 质数偏移 | 否 | 是 | 增加不可整除性 |

## 生成策略

### 策略 0: 逆向生成 (难度 < 0.3)
先模拟切割若干母板，统计产出子板作为需求。优点是最优解已知，适合验证算法正确性。

### 策略 1: 参数化随机 (难度 0.3-0.8)
根据难度参数控制尺寸分布、相似度、需求量。灵活可控，适合性能测试。

### 策略 2: 残差算例 (难度 > 0.8)
生成"几乎能填满"但有少量浪费的子板组合。使用质数偏移确保不能完美填充，极具挑战性。

## 编译

```bash
# 配置
cmake --preset vs2022-release

# 编译
cmake --build --preset release
```

## 使用方法

```bash
# 基本用法
CS-2D-Data.exe -d 0.5

# 完整参数
CS-2D-Data.exe [选项]
  -d, --difficulty <0.0-1.0>  难度系数 (默认 0.5)
  -n, --count <数量>          生成数量 (默认 1)
  -W, --width <宽度>          母板宽度 (默认 1000)
  -H, --height <高度>         母板高度 (默认 500)
  -o, --output <目录>         输出目录 (默认 data)
  -s, --seed <种子>           随机种子 (默认时间戳)
  -h, --help                  显示帮助

# 示例
CS-2D-Data.exe -d 0.3 -n 10 -o easy_instances
CS-2D-Data.exe -d 0.9 -W 2000 -H 1000 -o hard_instances
```

## 输出格式

文件名格式: `inst_{YYYYMMDD}_{HHMMSS}_d{difficulty}.csv`

```csv
# 2DPackLib CSV Format - 2D Cutting Stock Problem
# Generated by CS-2D-Data
# Difficulty: 0.50
#
stock_width,stock_height
1000,500
#
id,width,height,demand
0,180,120,5
1,250,80,3
2,150,150,4
...
```

## 项目结构

```
CS-2D-Data/
├── src/
│   ├── generator.h      # 生成器接口与难度参数
│   ├── generator.cpp    # 三种生成策略实现
│   └── main.cpp         # 命令行入口
├── data/                # 输出目录
├── CMakeLists.txt
└── CMakePresets.json
```

## 与求解器集成

本项目生成的算例可直接被 CS-2D-BP-Arc 求解器读取:

```
CS-2D-Data/data/  <--读取--  CS-2D-BP-Arc
```

求解器自动选择目录中最新的算例文件。

## 许可证

MIT License
