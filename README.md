# CS-2D-Data: 二维下料问题算例生成器

> 2D Cutting Stock Problem 测试算例生成器
>
> 特点: 单参数难度控制 + 三种生成策略 + 2DPackLib 兼容格式

---

## 目录

- 1 [项目简介](#1-项目简介)
- 2 [难度参数设计](#2-难度参数设计)
- 3 [生成策略](#3-生成策略)
- 4 [程序架构](#4-程序架构)
- 5 [构建与运行](#5-构建与运行)
- 6 [输出格式](#6-输出格式)

---

## 1. 项目简介

### 1.1 功能定位

CS-2D-Data 是 CS-2D-BP-Arc 求解器的配套算例生成工具，通过单一难度参数自动派生所有生成参数。

### 1.2 问题描述

二维下料问题: 将固定尺寸母板切割为多种规格子板，目标是最小化母板使用量。

```
母板 (L x W)              切割后
+------------------+      +------------------+
|                  |      | A  | B  |   C    |
|                  | -->  |----+----+--------|
|                  |      | D  |    E        |
+------------------+      +------------------+
```

### 1.3 关联项目

| 项目 | 说明 |
|:-----|:-----|
| [CS-2D-BP-Arc](https://github.com/94yumingzhao/CS-2D-BP-Arc) | 核心求解器 (Branch and Price) |
| [CS-2D-GUI](https://github.com/94yumingzhao/CS-2D-GUI) | 图形界面 |

---

## 2. 难度参数设计

### 2.1 难度系数

难度系数 `d` (0.0 - 1.0) 自动控制以下参数:

| 参数 | d = 0.0 | d = 1.0 | 影响 |
|:----:|:-------:|:-------:|:-----|
| 子板类型数 | 5 | 40 | 组合空间 |
| 尺寸相似度 | 0.0 | 0.9 | 对称性 |
| 最大需求量 | 30 | 3 | 分数解 |
| 尺寸下限 | 8% | 15% | 相对母板 |
| 尺寸上限 | 35% | 50% | 相对母板 |
| 质数偏移 | 否 | 是 | 不可整除性 |

### 2.2 难度等级

| 等级 | 难度范围 | 生成策略 | 适用场景 |
|:----:|:--------:|:--------:|:---------|
| 简单 | 0.0 - 0.3 | 逆向生成 | 算法验证 |
| 中等 | 0.3 - 0.8 | 参数化随机 | 性能测试 |
| 困难 | 0.8 - 1.0 | 残差算例 | 压力测试 |

---

## 3. 生成策略

### 3.1 策略 0: 逆向生成 (d < 0.3)

先模拟切割若干母板，统计产出子板作为需求。

**优点**: 最优解已知，适合验证算法正确性

### 3.2 策略 1: 参数化随机 (0.3 <= d < 0.8)

根据难度参数控制尺寸分布、相似度、需求量。

**优点**: 灵活可控，适合性能测试

### 3.3 策略 2: 残差算例 (d >= 0.8)

生成"几乎能填满"但有少量浪费的子板组合，使用质数偏移确保不能完美填充。

**优点**: 极具挑战性，测试算法极限

---

## 4. 程序架构

### 4.1 技术栈

| 项目 | 说明 |
|:----:|:-----|
| 编程语言 | C++17 |
| 编译器 | MSVC 2022 |
| 构建系统 | CMake 3.24+ |
| 依赖 | 无外部依赖 |

### 4.2 目录结构

```
CS-2D-Data/
+-- CMakeLists.txt
+-- CMakePresets.json
+-- README.md
+-- data/                           # 输出目录
+-- src/
    +-- main.cpp                    # 命令行入口
    +-- generator.h                 # 生成器接口与难度参数
    +-- generator.cpp               # 三种生成策略实现
    +-- instance.h                  # 算例数据结构
    +-- difficulty_estimator.h/cpp  # 难度估计器
```

### 4.3 核心模块

| 模块 | 文件 | 功能 |
|:----:|:-----|:-----|
| 生成器 | generator.cpp | 三种策略实现 |
| 难度估计 | difficulty_estimator.cpp | 算例难度评估 |
| 数据结构 | instance.h | 子板类型定义 |

---

## 5. 构建与运行

### 5.1 环境要求

- Windows 10/11 x64
- MSVC (Visual Studio 2022)
- CMake 3.24+

### 5.2 构建命令

```bash
cmake --preset vs2022-release
cmake --build --preset release
```

### 5.3 命令行参数

```
CS-2D-Data.exe [选项]

选项:
  -d, --difficulty <0.0-1.0>  难度系数 (默认 0.5)
  -n, --count <数量>          生成数量 (默认 1)
  -W, --width <宽度>          母板宽度 (默认 1000)
  -H, --height <高度>         母板高度 (默认 500)
  -o, --output <目录>         输出目录 (默认 data)
  -s, --seed <种子>           随机种子 (默认时间戳)
  -h, --help                  显示帮助
```

### 5.4 使用示例

```bash
# 生成简单算例
CS-2D-Data.exe -d 0.3 -n 10 -o easy_instances

# 生成困难算例
CS-2D-Data.exe -d 0.9 -W 2000 -H 1000 -o hard_instances
```

---

## 6. 输出格式

### 6.1 文件命名

```
inst_{YYYYMMDD}_{HHMMSS}_d{difficulty}.csv
```

### 6.2 CSV 结构 (2DPackLib 格式)

```csv
# 2DPackLib CSV Format - 2D Cutting Stock Problem
# Generated by CS-2D-Data
# Difficulty: 0.50
#
stock_width,stock_height
1000,500
#
id,width,height,demand
0,180,120,5
1,250,80,3
2,150,150,4
...
```

### 6.3 字段说明

| 字段 | 说明 |
|:-----|:-----|
| stock_width | 母板宽度 (X 方向) |
| stock_height | 母板高度 (Y 方向) |
| id | 子板类型编号 |
| width | 子板宽度 |
| height | 子板高度 |
| demand | 需求量 |

---

**文档版本**: 1.0
**更新日期**: 2026-01-11
